name: Explorar e Baixar Vídeo Google Drive

on:
  workflow_dispatch:
    inputs:
      drive_url:
        description: 'URL do Google Drive (com id=...)'
        required: true
        type: string

jobs:
  baixar-video:
    runs-on: ubuntu-latest
    env:
      ACTIONS_STEP_DEBUG: true

    steps:
      - name: Checkout do código
        uses: actions/checkout@v3

      - name: Configurar Node.js
        uses: actions/setup-node@v3
        with:
          node-version: 18

      - name: Instalar dependências Node.js
        run: npm install puppeteer axios fs-extra

      - name: Executar script baixar.js para baixar vídeo
        env:
          DRIVE_URL: ${{ github.event.inputs.drive_url }}
        run: node baixar.js

      - name: Fazer upload do vídeo como artefato
        uses: actions/upload-artifact@v4
        with:
          name: video-google-drive
          path: video.mp4
